"use strict";(self.webpackChunkproyecto=self.webpackChunkproyecto||[]).push([[709],{5709:($,g,i)=>{i.r(g),i.d(g,{AccountsModule:()=>H});var x=i(9808),h=i(1083),d=i(8966),_=i(5226),m=i.n(_),t=i(5e3),u=i(3075);let v=(()=>{class o{constructor(n){this.fb=n,this.baseForm=this.fb.group({idAccount:[""],name:["",u.kI.required],enabled:["",u.kI.required]})}}return o.\u0275fac=function(n){return new(n||o)(t.LFG(u.qu))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=i(9761),A=i(182),b=i(7322),y=i(7531),Z=i(9814),T=i(7423),f=(()=>{return(o=f||(f={})).EDIT="edit",o.NEW="new",f;var o})();let M=(()=>{class o{constructor(n,e,c,s){this.data=n,this.accountForm=e,this.accountSvc=c,this.authSvc=s,this.actionToDO=f.NEW,this.isLogged=!1,this.account=[],this.igual=!1}ngOnInit(){var n,e;(null===(e=null===(n=this.data)||void 0===n?void 0:n.account)||void 0===e?void 0:e.hasOwnProperty("idAccount"))&&(this.actionToDO=f.EDIT,this.pathFormData(),this.data.title="Modificar cuenta")}onSave(){const e=this.data.account.idAccount;let c;this.actionToDO===f.NEW?(c=this.accountSvc.crearAccount(this.accountForm.baseForm.value),c.subscribe(s=>{m().fire({title:"Creado",text:"La cuenta ha sido creado correctamente",icon:"success",timer:800}),m().showLoading()})):(c=this.accountSvc.updateAccount(e,this.accountForm.baseForm.value),c.subscribe(s=>{m().fire({title:"Modificado",text:"La cuenta ha sido modificado correctamente",icon:"success",timer:800}),m().showLoading()}))}pathFormData(){var n,e,c,s,r,p;this.accountForm.baseForm.setValue({idAccount:null===(e=null===(n=this.data)||void 0===n?void 0:n.account)||void 0===e?void 0:e.idAccount,name:null===(s=null===(c=this.data)||void 0===c?void 0:c.account)||void 0===s?void 0:s.name,enabled:null===(p=null===(r=this.data)||void 0===r?void 0:r.account)||void 0===p?void 0:p.enabled})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(d.WI),t.Y36(v),t.Y36(C.B),t.Y36(A.e))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-modal"]],decls:24,vars:6,consts:[["mat-dialog-title",""],[1,"animated","fadeIn","faster"],[1,"modal-form"],[3,"formGroup"],[1,"full-width-input"],["matInput","","placeholder","nombre","required","","name","nombre","formControlName","name"],["formControlName","enabled","required",""],[3,"value"],[1,"false",3,"value"],["align","end"],["mat-button","","mat-dialog-close",""],["type","button","ckdFocusInitial","",1,"btn","btn-primary",3,"mat-dialog-close","disabled","click"]],template:function(n,e){1&n&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"mat-dialog-content",1)(3,"div",2)(4,"form",3)(5,"mat-form-field",4)(6,"mat-label"),t._uU(7,"Nombre de la cuenta"),t.qZA(),t._UZ(8,"input",5),t.qZA(),t.TgZ(9,"div")(10,"label"),t._uU(11,"Estado de la cuenta: "),t.qZA(),t._UZ(12,"br")(13,"br"),t.TgZ(14,"mat-radio-group",6)(15,"mat-radio-button",7),t._uU(16,"Activado"),t.qZA(),t.TgZ(17,"mat-radio-button",8),t._uU(18,"Desactivado"),t.qZA()()()()()(),t.TgZ(19,"mat-dialog-actions",9)(20,"button",10),t._uU(21,"Cancelar"),t.qZA(),t.TgZ(22,"button",11),t.NdJ("click",function(){return e.onSave()}),t._uU(23," Guardar "),t.qZA()()),2&n&&(t.xp6(1),t.hij(" ",null==e.data?null:e.data.title,"\n"),t.xp6(3),t.Q6J("formGroup",e.accountForm.baseForm),t.xp6(11),t.Q6J("value",!0),t.xp6(2),t.Q6J("value",!1),t.xp6(5),t.Q6J("mat-dialog-close",!0)("disabled",e.accountForm.baseForm.invalid))},directives:[d.uh,d.xY,u._Y,u.JL,u.sg,b.KE,b.hX,y.Nt,u.Fj,u.Q7,u.JJ,u.u,Z.VQ,Z.U0,d.H8,T.lW,d.ZT],styles:[".modal-form[_ngcontent-%COMP%]{padding:1rem 0}.modal-form[_ngcontent-%COMP%]   .full-width-input[_ngcontent-%COMP%]{width:100%}.false[_ngcontent-%COMP%]{margin-left:10px}"]}),o})();var l=i(4999),F=i(4847),U=i(7579),O=i(2722),S=i(7446);function w(o,a){1&o&&(t.TgZ(0,"th",16),t._uU(1,"#"),t.qZA())}function D(o,a){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const n=a.index;t.xp6(1),t.Oqu(n+1)}}function N(o,a){1&o&&(t.TgZ(0,"th",16),t._uU(1,"Nombre"),t.qZA())}function Y(o,a){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const n=a.$implicit;t.xp6(1),t.Oqu(n.name)}}function B(o,a){1&o&&(t.TgZ(0,"th",16),t._uU(1,"Activado"),t.qZA())}function Q(o,a){if(1&o&&(t.TgZ(0,"td",17),t._UZ(1,"mat-checkbox",18),t.qZA()),2&o){const n=a.$implicit;t.xp6(1),t.Q6J("checked",n.enabled)}}function J(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1,"Editar"),t.qZA())}function E(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"td",17)(1,"div",2)(2,"button",20),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw().onOpenModal(s)}),t._uU(3," Editar \xa0 "),t._UZ(4,"i",21),t.qZA()()()}}function P(o,a){1&o&&(t.TgZ(0,"th",19),t._uU(1,"Eliminar"),t.qZA())}function k(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"td",17)(1,"div",2)(2,"button",22),t.NdJ("click",function(){const s=t.CHM(n).$implicit;return t.oxw().onDelete(s.idAccount)}),t._uU(3," Eliminar \xa0 "),t._UZ(4,"i",23),t.qZA()()()}}function I(o,a){1&o&&t._UZ(0,"tr",24)}function R(o,a){1&o&&t._UZ(0,"tr",25)}const q=[{path:"",component:(()=>{class o{constructor(n,e,c,s,r){this.authSvc=n,this.accountSvc=e,this.dialog=c,this.accountForm=s,this.router=r,this.destroy$=new U.x,this.displayedColumns=["#","name","enabled","edit","delete"],this.dataSource=new l.by}ngAfterViewInit(){this.dataSource.sort=this.empTbSort}ngOnDestroy(){this.destroy$.next({}),this.destroy$.complete()}ngOnInit(){null==localStorage.getItem("token")&&this.router.navigate([""]),this.accountSvc.getAccounts().subscribe(n=>{this.dataSource.data=n}),console.log()}onOpenModal(n={}){this.dialog.open(M,{height:"50%",width:"40%",hasBackdrop:!1,data:{title:"Nueva cuenta",account:n}}).afterClosed().subscribe(c=>{this.accountSvc.getAccounts().subscribe(s=>{this.dataSource.data=s,this.accountForm.baseForm.reset()})})}onDelete(n){const e=m().mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger"},buttonsStyling:!1});e.fire({title:"\xbfSeguro que quieres borrar esta cuenta?",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",reverseButtons:!0}).then(c=>{c.isConfirmed?(e.fire("Eliminado","La cuenta ha sido eliminado correctamente","success"),this.accountSvc.deleteAccount(n).pipe((0,O.R)(this.destroy$)).subscribe(s=>{this.accountSvc.getAccounts().subscribe(r=>{this.dataSource.data=r})})):c.dismiss===m().DismissReason.cancel&&e.fire("Cancelado","La cuenta no ha sido eliminada","error")})}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(A.e),t.Y36(C.B),t.Y36(d.uw),t.Y36(v),t.Y36(h.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-accounts"]],viewQuery:function(n,e){if(1&n&&t.Gf(F.YE,5),2&n){let c;t.iGM(c=t.CRH())&&(e.empTbSort=c.first)}},decls:26,vars:3,consts:[[1,"animated","fadeIn","faster","logged"],[1,"mt-5","w-90"],[1,"table-button-row"],["type","button",1,"btn","btn-primary","mt-3",3,"click"],[1,"fa-solid","fa-plus"],["mat-table","",3,"dataSource"],["matColumnDef","#",1,"width"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","enabled"],["matColumnDef","edit"],["mat-header-cell","","class","action",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["disabled","",3,"checked"],["mat-header-cell","",1,"action"],["mat-flat-button","",1,"edit",3,"click"],[1,"fa-solid","fa-pen-to-square"],["mat-flat-button","","color","warn",1,"del",3,"click"],[1,"fa-solid","fa-trash"],["mat-header-row",""],["mat-row",""]],template:function(n,e){1&n&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Cuentas"),t.qZA(),t._UZ(3,"hr"),t.TgZ(4,"div",2)(5,"button",3),t.NdJ("click",function(){return e.onOpenModal()}),t._uU(6," Agregar cuenta \xa0 "),t._UZ(7,"i",4),t.qZA()(),t.TgZ(8,"table",5),t.ynx(9,6),t.YNc(10,w,2,0,"th",7),t.YNc(11,D,2,1,"td",8),t.BQk(),t.ynx(12,9),t.YNc(13,N,2,0,"th",7),t.YNc(14,Y,2,1,"td",8),t.BQk(),t.ynx(15,10),t.YNc(16,B,2,0,"th",7),t.YNc(17,Q,2,1,"td",8),t.BQk(),t.ynx(18,11),t.YNc(19,J,2,0,"th",12),t.YNc(20,E,5,0,"td",8),t.BQk(),t.ynx(21,13),t.YNc(22,P,2,0,"th",12),t.YNc(23,k,5,0,"td",8),t.BQk(),t.YNc(24,I,1,0,"tr",14),t.YNc(25,R,1,0,"tr",15),t.qZA()()),2&n&&(t.xp6(8),t.Q6J("dataSource",e.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",e.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",e.displayedColumns))},directives:[l.BZ,l.w1,l.fO,l.ge,l.Dz,l.ev,S.oG,T.lW,l.as,l.XQ,l.nj,l.Gk],styles:[".flex[_ngcontent-%COMP%]{padding:7rem 1rem}div[_ngcontent-%COMP%]{width:80%;margin:0 auto}hr[_ngcontent-%COMP%]{width:100%}table[_ngcontent-%COMP%]{width:100%;margin-top:2rem}th[_ngcontent-%COMP%]{color:#000}.table-button-row[_ngcontent-%COMP%]{margin:0}h1[_ngcontent-%COMP%]{font-weight:700}.del[_ngcontent-%COMP%]{margin:15px}.logged[_ngcontent-%COMP%]{padding-bottom:50px}.new[_ngcontent-%COMP%]{background-color:#0069d9;color:#fff}.edit[_ngcontent-%COMP%]{background-color:#0c0;color:#fff}"]}),o})()}];let L=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(q)],h.Bz]}),o})();var G=i(4169);let H=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[x.ez,L,G.q]]}),o})()}}]);